---
import iPhone15ProMockup from './iPhone15ProMockup.astro';
---

<section class="min-h-screen flex items-center justify-center bg-gradient-to-br from-white via-gray-50 to-gray-100 overflow-hidden py-16">
  <!-- Subtle dot pattern overlay -->
  <div class="absolute inset-0 opacity-5" style="background-image: radial-gradient(circle at 1px 1px, rgba(0,0,0,0.1) 1px, transparent 0); background-size: 32px 32px;"></div>
  
  <div class="relative z-10 max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 h-full flex items-center">
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 w-full items-center">
      
      <!-- Left side - Content -->
      <div class="text-center lg:text-left space-y-6">
        <!-- Coming Soon Badge -->
        <div class="inline-block bg-gaming-green/10 text-gaming-green px-4 py-2 rounded-full text-sm font-semibold border border-gaming-green/20">
          Coming Soon
        </div>
        
        <!-- Main Title -->
        <h1 class="text-3xl sm:text-4xl lg:text-5xl font-bold leading-tight text-gray-900">
          The Future of
          <span class="text-gaming-green animate-pulse-gaming block">Esports Streaming</span>
        </h1>
        
        <!-- Description -->
        <p class="text-lg text-gray-600 max-w-lg">
          Never miss your favorite gaming moments. We're building the ultimate platform to discover and watch live esports content.
        </p>
        
        <!-- Email Signup Form -->
        <div class="mt-8">
          <form id="emailForm" class="max-w-md mx-auto lg:mx-0">
            <div class="flex flex-col sm:flex-row gap-3">
              <input
                type="email"
                id="email"
                name="email"
                placeholder="Enter your email"
                required
                class="flex-1 px-4 py-3 bg-white border border-gray-300 rounded-lg text-gray-900 placeholder-gray-500 focus:outline-none focus:border-gaming-green focus:ring-2 focus:ring-gaming-green/20 transition-all shadow-sm"
              />
              <button
                type="submit"
                class="bg-gaming-green text-dark-bg px-6 py-3 rounded-lg font-semibold hover:bg-gaming-green/90 transition-all transform hover:scale-105 whitespace-nowrap shadow-lg shadow-gaming-green/25"
              >
                Get Early Access
              </button>
            </div>
          </form>
          
          <!-- Success/Error Messages -->
          <div id="successMessage" class="hidden bg-gaming-green/20 border border-gaming-green/50 text-gaming-green px-4 py-3 rounded-lg mt-4 text-sm">
            âœ“ Thanks! We'll notify you when we launch.
          </div>
          
          <div id="errorMessage" class="hidden bg-red-500/20 border border-red-500/50 text-red-400 px-4 py-3 rounded-lg mt-4 text-sm">
            <span id="errorText">Something went wrong. Please try again.</span>
          </div>
          
          <p class="text-gray-400 text-xs mt-3">No spam, just launch updates.</p>
        </div>
        
        <!-- Key Features -->
        <div class="grid grid-cols-2 gap-4 mt-8 text-sm">
          <div class="flex items-center space-x-2">
            <div class="w-2 h-2 bg-gaming-green rounded-full shadow-sm shadow-gaming-green/50"></div>
            <span class="text-gray-600">Real-time notifications</span>
          </div>
          <div class="flex items-center space-x-2">
            <div class="w-2 h-2 bg-gaming-green rounded-full shadow-sm shadow-gaming-green/50"></div>
            <span class="text-gray-600">Smart discovery</span>
          </div>
          <div class="flex items-center space-x-2">
            <div class="w-2 h-2 bg-gaming-green rounded-full shadow-sm shadow-gaming-green/50"></div>
            <span class="text-gray-600">All major games</span>
          </div>
          <div class="flex items-center space-x-2">
            <div class="w-2 h-2 bg-gaming-green rounded-full shadow-sm shadow-gaming-green/50"></div>
            <span class="text-gray-600">Mobile optimized</span>
          </div>
        </div>
      </div>
      
      <!-- Right side - Phone Mockup -->
      <div class="flex justify-center lg:justify-end">
        <iPhone15ProMockup />
      </div>
    </div>
  </div>
</section>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const form = document.getElementById('emailForm') as HTMLFormElement;
    const successMessage = document.getElementById('successMessage');
    const errorMessage = document.getElementById('errorMessage');
    const errorText = document.getElementById('errorText');

    form?.addEventListener('submit', async function(e) {
      e.preventDefault();
      
      const formData = new FormData(form);
      const email = formData.get('email');
      
      // Hide any previous messages
      successMessage?.classList.add('hidden');
      errorMessage?.classList.add('hidden');
      
      // Disable submit button
      const submitButton = form.querySelector('button[type="submit"]') as HTMLButtonElement;
      const originalText = submitButton?.textContent;
      if (submitButton) {
        submitButton.disabled = true;
        submitButton.textContent = 'Submitting...';
      }
      
      try {
        // Simple email validation
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        if (!email || !emailRegex.test(email as string)) {
          if (errorText) {
            errorText.textContent = 'Please enter a valid email address.';
          }
          errorMessage?.classList.remove('hidden');
          return;
        }

        // Store email locally (for demo purposes)
        const emails = JSON.parse(localStorage.getItem('emails') || '[]');
        
        // Check if email already exists
        if (emails.includes(email)) {
          if (errorText) {
            errorText.textContent = 'Email already registered!';
          }
          errorMessage?.classList.remove('hidden');
          return;
        }
        
        // Add email to local storage
        emails.push(email);
        localStorage.setItem('emails', JSON.stringify(emails));
        
        // Show success message
        successMessage?.classList.remove('hidden');
        form.reset();
        
        // Log for demo purposes
        console.log('Emails collected:', emails);
        
      } catch (error) {
        // Show error message
        if (errorText) {
          errorText.textContent = 'Something went wrong. Please try again.';
        }
        errorMessage?.classList.remove('hidden');
      } finally {
        // Re-enable submit button
        if (submitButton) {
          submitButton.disabled = false;
          submitButton.textContent = originalText;
        }
      }
    });
  });
</script>